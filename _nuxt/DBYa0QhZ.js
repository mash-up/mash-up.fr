import{c$ as w,C as y,aY as O,aW as P,r as v,d0 as x,aX as B,E as U,h as D,w as I,e as M,H as c,R as N,P as L}from"./DiSjLrgm.js";import{u as G}from"./4yXD13SH.js";const V="rovingFocusGroup.onEntryFocus",Y={bubbles:!1,cancelable:!0},$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function W(e,o,r){const t=k(e.key,r);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return $[t]}function K(e,o=!1){const r=w();for(const t of e)if(t===r||(t.focus({preventScroll:o}),w()!==r))return}function X(e,o){return e.map((r,t)=>e[(o+t)%e.length])}const[q,H]=B("RovingFocusGroup"),J=y({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:r}){const t=e,m=r,{loop:T,orientation:g,dir:E}=O(t),F=G(E),d=P(t,"currentTabStopId",m,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),i=v(!1),l=v(!1),f=v(0),{getItems:b,CollectionSlot:A}=x({isProvider:!0});function C(n){const s=!l.value;if(n.currentTarget&&n.target===n.currentTarget&&s&&!i.value){const u=new CustomEvent(V,Y);if(n.currentTarget.dispatchEvent(u),m("entryFocus",u),!u.defaultPrevented){const p=b().map(a=>a.ref).filter(a=>a.dataset.disabled!==""),h=p.find(a=>a.getAttribute("data-active")===""),R=p.find(a=>a.id===d.value),_=[h,R,...p].filter(Boolean);K(_,t.preventScrollOnEntryFocus)}}l.value=!1}function S(){setTimeout(()=>{l.value=!1},1)}return o({getItems:b}),H({loop:T,dir:F,orientation:g,currentTabStopId:d,onItemFocus:n=>{d.value=n},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(n,s)=>(D(),U(c(A),null,{default:I(()=>[M(c(N),{tabindex:i.value||f.value===0?-1:0,"data-orientation":c(g),as:n.as,"as-child":n.asChild,dir:c(F),style:{outline:"none"},onMousedown:s[0]||(s[0]=u=>l.value=!0),onMouseup:S,onFocus:C,onBlur:s[1]||(s[1]=u=>i.value=!1)},{default:I(()=>[L(n.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{$ as M,J as _,K as f,W as g,q as i,X as w};
